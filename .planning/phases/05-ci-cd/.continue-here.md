---
phase: 05-ci-cd
task: complete
total_tasks: 2
status: phase_complete
last_updated: 2026-01-29
---

<current_state>
Milestone 1 is functionally complete. Phases 1-3 and 5 are done. Phase 4 (Documentation) is deferred.

The session ended after completing Phase 5 CI/CD workflows and setting up the `viscy` umbrella package. All changes are committed. Need to push to GitHub to verify CI workflows run.
</current_state>

<completed_work>

**Phase 5 CI/CD (this session):**
- Task 1: Create test workflow — Done (9-job matrix with alls-green)
- Task 2: Create lint workflow — Done (prek hooks)

**Additional work:**
- Set up `viscy` umbrella package with dynamic versioning
- Added `__version__` to both `viscy` and `viscy_transforms`
- Removed ty type checker (false positives with MONAI)
- Updated pre-commit config with additional hooks (pyproject-fmt, detect-private-key, etc.)
- Consolidated lint workflow to just use prek (removed redundant ruff format step)
</completed_work>

<remaining_work>

**Immediate:**
- Push to GitHub: `git push origin viscy-modular-gsd`
- Verify CI workflows run successfully in GitHub Actions tab
- Configure branch protection (optional): require "All tests pass" and "Lint" checks

**Deferred (Phase 4):**
- Zensical/mkdocs documentation
- GitHub Pages deployment
- API reference generation
</remaining_work>

<decisions_made>

- **viscy umbrella package:** Renamed root from `viscy-workspace` to `viscy`, made it installable with `package=true`
- **ty removed:** Too many false positives with MONAI abstract method signatures
- **Consolidated lint:** prek runs ruff-format hook, so separate `ruff format --check` was redundant
- **Pre-commit hooks:** Added pyproject-fmt, detect-private-key, check-ast, and other hygiene hooks
- **alls-green pattern:** Single status check for branch protection instead of requiring all 9 matrix jobs
</decisions_made>

<blockers>
None — all blockers resolved.
</blockers>

<context>
The monorepo migration is functionally complete. viscy-transforms is extracted as an independent package with:
- 16 transform modules, 44 public exports
- Full test suite (149 tests passing)
- CI/CD with 9-job test matrix + linting
- Dynamic versioning from git tags

The viscy umbrella package is set up to re-export from subpackages. Currently it just has version info, but future packages can be added.

Phase 4 (Documentation) was deferred because it's not blocking and Zensical is still alpha software.
</context>

<next_action>
1. Push branch to GitHub: `git push origin viscy-modular-gsd`
2. Check GitHub Actions tab to verify workflows run
3. If CI passes, consider creating PR to merge into main
4. Optional: Configure branch protection rules on GitHub
</next_action>
