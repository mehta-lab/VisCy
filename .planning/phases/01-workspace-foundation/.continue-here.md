---
phase: 01-workspace-foundation
task: 0
total_tasks: 6
status: planned
last_updated: 2026-01-27T16:45:00
---

<current_state>
Phase 1 planning is COMPLETE. No execution has started yet.

We ran `/gsd:plan-phase 1` which:
1. Researched the phase domain (uv workspaces, prek, ty, ruff)
2. Created 2 execution plans in 2 waves
3. Verified plans pass all quality checks

Plans are ready for execution. Nothing has been modified in the actual codebase yet.
</current_state>

<completed_work>

## Research Phase
- RESEARCH.md created with HIGH confidence findings
- uv workspace configuration patterns documented
- prek + ruff + ty toolchain validated
- Dev dependency strategy: root-level `[dependency-groups]`
- ty pre-commit workaround identified (local hook with `uvx ty check`)

## Planning Phase
- Plan 01-01: Clean slate + workspace pyproject.toml (3 tasks, Wave 1)
- Plan 01-02: Pre-commit hooks with ruff and ty (3 tasks, Wave 2)
- All requirements WORK-00 through WORK-05 mapped to tasks
- Plans verified by gsd-plan-checker - all checks passed

</completed_work>

<remaining_work>

## Execute Phase 1

Run: `/gsd:execute-phase 1`

This will execute:

**Wave 1 - Plan 01-01:**
1. Clean slate transition (remove old code, create packages/ and scripts/)
2. Create workspace pyproject.toml with all tool configuration
3. Initialize workspace with `uv sync`, generate uv.lock, commit

**Wave 2 - Plan 01-02:**
1. Create .pre-commit-config.yaml with ruff and ty hooks
2. Install and verify hooks with `uvx prek install`
3. Commit pre-commit configuration

</remaining_work>

<decisions_made>

- **ty over mypy**: Use Astral's ty type checker. If it doesn't work out, drop type checking rather than switch to mypy.
- **prek over pre-commit**: Rust-based, 7x faster hook installation.
- **Root-level dev dependencies**: All shared tools (pytest, ruff) in root `[dependency-groups]`, not per-package.
- **Clean slate approach**: Remove all code except LICENSE, CITATION.cff, .gitignore. Git history preserved for rollback.
- **ty local hook**: No official pre-commit repo yet, use `entry: uvx ty check` with `pass_filenames: false`.

</decisions_made>

<blockers>
None - ready for execution.
</blockers>

<context>
Model profile is "quality" (opus for researcher/planner, sonnet for checker).

Research identified key patterns:
- `[tool.uv.workspace]` with `members = ["packages/*"]` for workspace
- Root pyproject.toml must have `[build-system]` for uv to recognize it
- Ruff rules: E, F, W, I, D, NPY, PD with numpy docstring convention
- ty configuration: `[tool.ty.environment]` and `[tool.ty.rules]`

Plans are atomic commits:
- 01-01 commits: clean slate + workspace foundation
- 01-02 commits: pre-commit hooks configuration
</context>

<next_action>
Run `/clear` then `/gsd:execute-phase 1` in a fresh context window.

The executor will read both PLAN.md files and execute Wave 1 first (01-01), then Wave 2 (01-02).

Expected outcome: Working uv workspace with `uv sync` passing and `uvx prek run --all-files` passing.
</next_action>
