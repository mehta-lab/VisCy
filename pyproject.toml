[build-system]
requires = ["setuptools", "setuptools-scm[toml]"]
build-backend = "setuptools.build_meta"

[project]
name = "viscy"
description = "computer vision for image-based phenotyping of single cells"
readme = "README.md"
requires-python = ">=3.10"
license = { file = "LICENSE" }
authors = [{ name = "CZ Biohub SF", email = "compmicro@czbiohub.org" }]
classifiers = [
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "License :: OSI Approved :: BSD License",
]
dependencies = [
    "iohub==0.1.0",
    "torch>=2.1.2",
    "timm>=0.9.5",
    "tensorboard>=2.13.0",
    "lightning>=2.3.0",
    "monai>=1.4.0",
    "jsonargparse[signatures]>=4.20.1",
    "scikit-image",
    "matplotlib>=3.9.0",
    "numpy",
    "xarray",
]
dynamic = ["version"]

[project.optional-dependencies]
metrics = [
    "cellpose>=3.0.10",
    "scikit-learn>=1.1.3",
    "imbalanced-learn>=0.12.0",
    "torchmetrics[detection]>=1.3.1",
    "ptflops>=0.7",
    "umap-learn",
    "captum>=0.7.0",
]
examples = ["napari", "jupyter", "jupytext"]
visual = [
    "ipykernel",
    "graphviz",
    "torchview",
    "seaborn",
    "plotly",
    "nbformat",
    "cmap",
]
dev = [
    "viscy[metrics,examples,visual]",
    "pytest",
    "pytest-cov",
    "hypothesis",
    "ruff",
    "black",
    "profilehooks",
    "onnxruntime",
]

[project.scripts]
viscy = "viscy.cli:main"

[tool.setuptools]
packages = ["viscy"]

[tool.setuptools_scm]
write_to = "viscy/_version.py"

[tool.black]
line-length = 88

[tool.ruff]
src = ["viscy", "tests"]
lint.extend-select = ["I001"]
lint.isort.known-first-party = ["viscy"]
